# This is a sample workflow file for AI Code Review
# Copy this file to your project's .github/workflows/ directory

name: AI Code Review

# Trigger: When a PR is opened, updated, or reopened on main or dev branch
on:
  pull_request:
    types: [opened, synchronize, reopened]
    branches: [main, dev]

# Required permissions for the action
permissions:
  contents: read           # Read repository contents
  pull-requests: write     # Post comments on pull requests
  issues: write           # Post comments (backup method)

jobs:
  ai_review:
    name: AI Code Review
    runs-on: ubuntu-latest

    steps:
      # Step 1: Checkout the code
      - name: Checkout source code
        uses: actions/checkout@v4

      # Step 2: Run the AI Code Reviewer
      - name: Run OpenRouter AI Code Reviewer
        uses: TQC-Solution/flutter-ai-review-bot@main
        with:
          # OpenRouter API key (set this in repository secrets)
          openrouter-api-key: ${{ secrets.OPENROUTER_API_KEY }}

          # GitHub token (automatically provided by GitHub Actions)
          github-token: ${{ secrets.GITHUB_TOKEN }}

          # Review language: 'vietnamese' or 'english' (default: vietnamese)
          review-language: 'vietnamese'
